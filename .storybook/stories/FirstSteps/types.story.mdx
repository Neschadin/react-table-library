import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="First Steps/Types" />

## Compact Table Component

```javascript
export type Column = {
  label: string,
  renderCell: (node: TableNode) => React.ReactNode,
  resize?: ColumnResizeProps,
  sort?: ColumnSortProps,
  select?: ColumnSelectProps,
  tree?: ColumnTreeProps,
  pin?: boolean,
  hide?: ColumnHideProps,
  cellProps?: Record<string, any>,
};

export type VirtualizedOptions = {
  rowHeight: number | ((item: TableNode, index: number) => number),
  itemCount?: number,
};

export type TableOptions = {
  renderBeforeTable?: () => React.ReactNode,
  renderAfterTable?: () => React.ReactNode,
};

export type RowOptions = {
  renderBeforeRow?: (node: TableNode) => React.ReactNode,
  renderAfterRow?: (node: TableNode) => React.ReactNode,
};

export type RowPropsAsObject = Omit<RowProps, 'item' | 'children'>;

export type CompactTableProps = TableProps & {
  columns: Column[],
  tableOptions?: TableOptions,
  rowProps?: RowPropsAsObject,
  rowOptions?: RowOptions,
  virtualizedOptions?: VirtualizedOptions,
};
```

## Composable Table Components

```javascript
export type RestProps = Record<string, any>;

export type OnClick = (node: TableNode, event: React.SyntheticEvent | React.KeyboardEvent) => void;

export type CellProps = {
  className?: string,
  hide?: boolean,
  pin?: boolean,
  stiff?: boolean,
  onClick?: (event: React.SyntheticEvent) => void,
  children: React.ReactNode,
} & RestProps;

export type HeaderCellProps = {
  index?: number,
  hideKey?: string,
  className?: string,
  hide?: boolean,
  pin?: boolean,
  stiff?: boolean,
  resize?: ColumnResizeProps,
  children: React.ReactNode,
} & RestProps;

export type RowProps = {
  item: TableNode,
  className?: string,
  disabled?: boolean,
  onClick?: OnClick,
  onDoubleClick?: OnClick,
  children: React.ReactNode,
} & RestProps;

export type BodyProps = {
  children: React.ReactNode,
} & RestProps;

export type HeaderRowProps = {
  className?: string,
  children: React.ReactNode,
} & RestProps;

export type HeaderProps = {
  children: React.ReactNode,
} & RestProps;

export type TableProps = {
  data: Data,
  theme?: Theme,
  layout?: Layout,
  sort?: Sort,
  pagination?: Pagination,
  select?: Select,
  tree?: Tree,
  onInit?: OnInitFunction,
  children?: (nodes: TableNode[]) => React.ReactNode,
} & RestProps;

export type TableNode = {
  id: string,
  nodes?: TableNode[],
  [prop: string]: any,
};

export type Data = {
  pageInfo?: any,
  nodes: TableNode[],
};
```

## Theme

```javascript
export type Theme = {
  Table?: string,
  Header?: string,
  Body?: string,
  BaseRow?: string,
  HeaderRow?: string,
  Row?: string,
  BaseCell?: string,
  HeaderCell?: string,
  Cell?: string,
};
```

## Layout

```javascript
export type Layout = {
  custom: boolean;
  horizontalScroll: boolean;
  hiddenColumns: string[];
  fullHeight?: boolean;
};
```

## Resize

```javascript
type ColumnResizePropsObject = {
  minWidth?: number;
  resizerWidth?: number;
  resizerHighlight?: string;
};

export type ColumnResizeProps = ColumnResizePropsObject | boolean;
```

## Sort

```javascript
export enum SortIconPositions {
  Prefix,
  Suffix,
}

export type SortOptionsIcon = {
  position?: SortIconPositions;
  margin?: string;
  size?: string;
  iconDefault?: React.ReactElement | Nullish;
  iconUp?: React.ReactElement | Nullish;
  iconDown?: React.ReactElement | Nullish;
};

export type SortFn = (node: TableNode[]) => TableNode[];

export type SortOptions = {
  sortFns: Record<string, SortFn>;
  isServer?: boolean;
  sortIcon?: SortOptionsIcon;
  isRecursive?: boolean;
};

export type SortOptionsIconSound = {
  position: SortIconPositions;
  margin: string;
  size: string;
  iconDefault: React.ReactElement | Nullish;
  iconUp: React.ReactElement | Nullish;
  iconDown: React.ReactElement | Nullish;
};

export type SortOptionsSound = {
  sortFns: Record<string, SortFn>;
  isServer: boolean;
  sortIcon: SortOptionsIconSound;
  isRecursive: boolean;
};

export type SortFunctionInput = {
  sortKey: string;
};

export type SortFunctions = {
  onToggleSort: (sortFunctionInput: SortFunctionInput) => void;
};

export type ColumnSortProps = {
  sortKey: string;
  sortIcon?: SortOptionsIcon;
};

export type HeaderCellSortProps = {
  index?: number;
  sortKey: string;
  sortIcon?: SortOptionsIcon;
  children: React.ReactNode;
} & Record<string, any>;

export type Sort = {
  state: State;
  fns: SortFunctions;
  options: SortOptionsSound;
  modifier: Modifier;
  components: {
    HeaderCellSort: React.FunctionComponent<HeaderCellSortProps>;
  };
};
```

## Select

```javascript
import { State, IdReducerFunctions } from '@table-library/react-table-library/types/common';
import { TableNode, GetRowProps } from '@table-library/react-table-library/types/table';
import React from 'react';

export enum SelectClickTypes {
  RowClick,
  ButtonClick,
}

export enum SelectTypes {
  SingleSelect,
  MultiSelect,
}

export type SelectOptions = {
  clickType?: SelectClickTypes;
  rowSelect?: SelectTypes;
  buttonSelect?: SelectTypes;
  isCarryForward?: boolean;
  isPartialToAll?: boolean;
};

export type SelectOptionsSound = {
  clickType: SelectClickTypes;
  rowSelect: SelectTypes;
  buttonSelect: SelectTypes;
  isCarryForward: boolean;
  isPartialToAll: boolean;
};

export type CellSelectProps = {
  item: TableNode;
};

type ColumnSelectPropsObject = {
  renderHeaderCellSelect?: () => React.ReactNode;
  renderCellSelect?: (node: TableNode) => React.ReactNode;
};

export type ColumnSelectProps = ColumnSelectPropsObject | boolean;

export type Select = {
  state: State;
  fns: IdReducerFunctions;
  options: SelectOptionsSound;
  _getRowProps: GetRowProps;
  components: {
    HeaderCellSelect: React.FunctionComponent<Record<string, any>>;
    CellSelect: React.FunctionComponent<CellSelectProps>;
  };
};
```

## Tree

```javascript
import * as React from 'react';
import {
  Nullish,
  State,
  IdReducerFunctions,
  Modifier,
} from '@table-library/react-table-library/types/common';
import { TableNode, GetRowProps } from '@table-library/react-table-library/types/table';

export enum TreeExpandClickTypes {
  RowClick,
  ButtonClick,
}

export type TreeOptionsIcon = {
  margin?: string;
  size?: string;
  noIconMargin?: string;
  iconDefault?: React.ReactElement | Nullish;
  iconRight?: React.ReactElement | Nullish;
  iconDown?: React.ReactElement | Nullish;
};

export type TreeOptions = {
  isServer?: boolean;
  treeIcon?: TreeOptionsIcon;
  clickType?: TreeExpandClickTypes;
  indentation?: number;
  treeXLevel?: number;
  treeYLevel?: number;
};

export type TreeOptionsIconSound = {
  margin: string;
  size: string;
  noIconMargin: string;
  iconDefault: React.ReactElement | Nullish;
  iconRight: React.ReactElement | Nullish;
  iconDown: React.ReactElement | Nullish;
};

export type TreeOptionsSound = {
  isServer: boolean;
  treeIcon: TreeOptionsIconSound;
  clickType: TreeExpandClickTypes;
  indentation: number;
  treeXLevel: number;
  treeYLevel: number;
};

export type ColumnTreePropsObject = {
  treeIcon?: TreeOptionsIcon;
};

export type ColumnTreeProps = ColumnTreePropsObject | boolean;

export type CellTreeProps = {
  item: TableNode;
  treeIcon?: TreeOptionsIcon;
  children: React.ReactNode;
};

export type Tree = {
  state: State;
  fns: IdReducerFunctions;
  options: TreeOptionsSound;
  _getRowProps: GetRowProps;
  modifier: Modifier;
  components: {
    CellTree: React.FunctionComponent<CellTreeProps>;
  };
};
```

## Pagination

```javascript
import { State, Modifier } from '@table-library/react-table-library/types/common';
import { TableNode } from '@table-library/react-table-library/types/table';

export type PaginationOptions = {
  isServer?: boolean;
};

export type PaginationOptionsSound = {
  isServer: boolean;
};

export type PaginationFunctions = {
  onSetPage: (page: number) => void;
  onSetSize: (size: number) => void;
};

export type Pagination = {
  state: State;
  fns: PaginationFunctions;
  options: PaginationOptionsSound;
  modifier: Modifier;
};

export type Pages = Record<string, TableNode[]>;
```

## Column Hiding

```javascript
export type ColumnHideProps = {
  hideKey: string;
};
```